/*!
 * iCheck v1.0.3, http://git.io/arlzeA
 * ===================================
 * Powerful jQuery and Zepto plugin for checkboxes and radio buttons customization
 *
 * (c) 2013 Damir Sultanov, http://fronteed.com
 * MIT Licensed
 */
function scrollToGatewayInputError(){var displayError=jQuery(".gateway-errors,.assisted-cc-input-feedback").first(),frm=displayError.closest("form");frm||(frm=jQuery("form").first()),frm.find('button[type="submit"],input[type="submit"]').prop("disabled",!1).removeClass("disabled").find("i.fas,i.far,i.fal,i.fab").removeAttr("class").addClass("fas fa-arrow-circle-right").find("span").toggle(),displayError.length&&elementOutOfViewPort(displayError[0])&&jQuery("html, body").animate({scrollTop:displayError.offset().top-50},500)}function elementOutOfViewPort(element){var bounding=element.getBoundingClientRect(),out={};return out.top=bounding.top<0,out.left=bounding.left<0,out.bottom=bounding.bottom>(window.innerHeight||document.documentElement.clientHeight),out.right=bounding.right>(window.innerWidth||document.documentElement.clientWidth),out.any=out.top||out.left||out.bottom||out.right,out.any}!function($){var _iCheck="iCheck",_iCheckHelper="iCheck-helper",_checkbox="checkbox",_radio="radio",_checked="checked",_unchecked="unchecked",_disabled="disabled",_determinate="determinate",_indeterminate="indeterminate",_update="update",_type="type",_click="click",_touch="touchbegin.i touchend.i",_add="addClass",_remove="removeClass",_callback="trigger",_label="label",_cursor="cursor",_mobile=/ip(hone|od|ad)|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1;function operate(input,direct,method){var node=input[0],state=/er/.test(method)?_indeterminate:/bl/.test(method)?_disabled:_checked,active=method==_update?{checked:node.checked,disabled:node.disabled,indeterminate:"true"==input.attr(_indeterminate)||"false"==input.attr(_determinate)}:node[state];if(/^(ch|di|in)/.test(method)&&!active)on(input,state);else if(/^(un|en|de)/.test(method)&&active)off(input,state);else if(method==_update)for(var each in active)active[each]?on(input,each,!0):off(input,each,!0);else direct&&"toggle"!=method||(direct||input.trigger("ifClicked"),active?node.type!==_radio&&off(input,state):on(input,state))}function on(input,state,keep){var node=input[0],parent=input.parent(),checked=state==_checked,indeterminate=state==_indeterminate,disabled=state==_disabled,callback=indeterminate?_determinate:checked?_unchecked:"enabled",regular=option(input,callback+capitalize(node.type)),specific=option(input,state+capitalize(node.type));if(!0!==node[state]){if(!keep&&state==_checked&&node.type==_radio&&node.name){var form=input.closest("form"),inputs='input[name="'+node.name+'"]';(inputs=form.length?form.find(inputs):$(inputs)).each((function(){this!==node&&$(this).data(_iCheck)&&off($(this),state)}))}indeterminate?(node[state]=!0,node.checked&&off(input,_checked,"force")):(keep||(node[state]=!0),checked&&node.indeterminate&&off(input,_indeterminate,!1)),callbacks(input,checked,state,keep)}node.disabled&&option(input,_cursor,!0)&&parent.find(".iCheck-helper").css(_cursor,"default"),parent[_add](specific||option(input,state)||""),parent.attr("role")&&!indeterminate&&parent.attr("aria-"+(disabled?_disabled:_checked),"true"),parent[_remove](regular||option(input,callback)||"")}function off(input,state,keep){var node=input[0],parent=input.parent(),checked=state==_checked,indeterminate=state==_indeterminate,disabled=state==_disabled,callback=indeterminate?_determinate:checked?_unchecked:"enabled",regular=option(input,callback+capitalize(node.type)),specific=option(input,state+capitalize(node.type));!1!==node[state]&&(!indeterminate&&keep&&"force"!=keep||(node[state]=!1),callbacks(input,checked,callback,keep)),!node.disabled&&option(input,_cursor,!0)&&parent.find(".iCheck-helper").css(_cursor,"pointer"),parent[_remove](specific||option(input,state)||""),parent.attr("role")&&!indeterminate&&parent.attr("aria-"+(disabled?_disabled:_checked),"false"),parent[_add](regular||option(input,callback)||"")}function tidy(input,callback){input.data(_iCheck)&&(input.parent().html(input.attr("style",input.data(_iCheck).s||"")),callback&&input.trigger(callback),input.off(".i").unwrap(),$('label[for="'+input[0].id+'"]').add(input.closest(_label)).off(".i"))}function option(input,state,regular){if(input.data(_iCheck))return input.data(_iCheck).o[state+(regular?"":"Class")]}function capitalize(string){return string.charAt(0).toUpperCase()+string.slice(1)}function callbacks(input,checked,callback,keep){keep||(checked&&input.trigger("ifToggled"),input.trigger("change").trigger("ifChanged").trigger("if"+capitalize(callback)))}$.fn.iCheck=function(options,fire){var handle='input[type="checkbox"], input[type="radio"]',stack=$(),walker=function(object){object.each((function(){var self=$(this);stack=self.is(handle)?stack.add(self):stack.add(self.find(handle))}))};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(options))return options=options.toLowerCase(),walker(this),stack.each((function(){var self=$(this);"destroy"==options?tidy(self,"ifDestroyed"):operate(self,!0,options),$.isFunction(fire)&&fire()}));if("object"!=typeof options&&options)return this;var settings=$.extend({checkedClass:_checked,disabledClass:_disabled,indeterminateClass:_indeterminate,labelHover:!0},options),selector=settings.handle,hoverClass=settings.hoverClass||"hover",focusClass=settings.focusClass||"focus",activeClass=settings.activeClass||"active",labelHover=!!settings.labelHover,labelHoverClass=settings.labelHoverClass||"hover",area=0|(""+settings.increaseArea).replace("%","");return selector!=_checkbox&&selector!=_radio||(handle='input[type="'+selector+'"]'),area<-50&&(area=-50),walker(this),stack.each((function(){var self=$(this);tidy(self);var node=this,id=node.id,offset=-area+"%",size=100+2*area+"%",layer={position:"absolute",top:offset,left:offset,display:"block",width:size,height:size,margin:0,padding:0,background:"#fff",border:0,opacity:0},hide=_mobile?{position:"absolute",visibility:"hidden"}:area?layer:{position:"absolute",opacity:0},className=node.type==_checkbox?settings.checkboxClass||"icheckbox":settings.radioClass||"iradio",label=$('label[for="'+id+'"]').add(self.closest(_label)),aria=!!settings.aria,ariaID="iCheck-"+Math.random().toString(36).substr(2,6),parent='<div class="'+className+'" '+(aria?'role="'+node.type+'" ':""),helper;aria&&label.each((function(){parent+='aria-labelledby="',this.id?parent+=this.id:(this.id=ariaID,parent+=ariaID),parent+='"'})),parent=self.wrap(parent+"/>").trigger("ifCreated").parent().append(settings.insert),helper=$('<ins class="iCheck-helper"/>').css(layer).appendTo(parent),self.data(_iCheck,{o:settings,s:self.attr("style")}).css(hide),settings.inheritClass&&parent[_add](node.className||""),settings.inheritID&&id&&parent.attr("id","iCheck-"+id),"static"==parent.css("position")&&parent.css("position","relative"),operate(self,!0,_update),label.length&&label.on("click.i mouseover.i mouseout.i "+_touch,(function(event){var type=event.type,item=$(this);if(!node.disabled){if(type==_click){if($(event.target).is("a"))return;operate(self,!1,!0)}else labelHover&&(/ut|nd/.test(type)?(parent[_remove](hoverClass),item[_remove](labelHoverClass)):(parent[_add](hoverClass),item[_add](labelHoverClass)));if(!_mobile)return!1;event.stopPropagation()}})),self.on("click.i focus.i blur.i keyup.i keydown.i keypress.i",(function(event){var type=event.type,key=event.keyCode;return type!=_click&&("keydown"==type&&32==key?(node.type==_radio&&node.checked||(node.checked?off(self,_checked):on(self,_checked)),!1):void("keyup"==type&&node.type==_radio?!node.checked&&on(self,_checked):/us|ur/.test(type)&&parent["blur"==type?_remove:_add](focusClass)))})),helper.on("click mousedown mouseup mouseover mouseout "+_touch,(function(event){var type=event.type,toggle=/wn|up/.test(type)?activeClass:hoverClass;if(!node.disabled){if(type==_click?operate(self,!1,!0):(/wn|er|in/.test(type)?parent[_add](toggle):parent[_remove](toggle+" "+activeClass),label.length&&labelHover&&toggle==hoverClass&&label[/ut|nd/.test(type)?_remove:_add](labelHoverClass)),!_mobile)return!1;event.stopPropagation()}}))}))}}(window.jQuery||window.Zepto),
/**
 * WHMCS core JS library reference
 *
 * @copyright Copyright (c) WHMCS Limited 2005-2017
 * @license http://www.whmcs.com/license/ WHMCS Eula
 */
function(window,factory){"object"!=typeof window.WHMCS&&(window.WHMCS=factory)}(window,{hasModule:function(name){return void 0!==WHMCS[name]&&Object.getOwnPropertyNames(WHMCS[name]).length>0},loadModule:function(name,module){if(!this.hasModule(name))if(WHMCS[name]={},"function"==typeof module)module.apply(WHMCS[name]);else for(var key in module)module.hasOwnProperty(key)&&(WHMCS[name][key]={},module[key].apply(WHMCS[name][key]))}}),jQuery(document).ready((function(){jQuery(document).on("click",".disable-on-click",(function(){if(jQuery(this).addClass("disabled"),jQuery(this).hasClass("spinner-on-click")){var icon=$(this).find("i.fas,i.far,i.fal,i.fab");jQuery(icon).removeAttr("class").addClass("fas fa-spinner fa-spin")}})).on("click","#openTicketSubmit.disabled",(function(){return!1}))})),
/**
 * WHMCS authentication module
 *
 * @copyright Copyright (c) WHMCS Limited 2005-2017
 * @license http://www.whmcs.com/license/ WHMCS Eula
 */
function(module){WHMCS.hasModule("authn")||WHMCS.loadModule("authn",module)}({provider:function(){var callbackFired=!1;return this.feedbackContainer=function(){return jQuery(".providerLinkingFeedback")},this.btnContainer=function(){return jQuery(".providerPreLinking")},this.feedbackMessage=function(context){void 0===context&&(context="complete_sign_in");var msgContainer=jQuery("p.providerLinkingMsg-preLink-"+context);return msgContainer.length?msgContainer.first().html():""},this.showProgressMessage=function(callback){this.feedbackContainer().fadeIn("fast",(function(){"function"!=typeof callback||callbackFired||(callbackFired=!0,callback())}))},this.preLinkInit=function(callback){var icon='<i class="fas fa-fw fa-spinner fa-spin"></i> ';this.feedbackContainer().removeClass("alert-danger alert-success").addClass("alert alert-info").html(icon+this.feedbackMessage()).hide();var btnContainer=this.btnContainer();if(btnContainer.length)if(btnContainer.data("hideOnPrelink")){var self=this;btnContainer.fadeOut("false",(function(){self.showProgressMessage(callback)}))}else btnContainer.data("disableOnPrelink")?(btnContainer.find(".btn").addClass("disabled"),this.showProgressMessage(callback)):this.showProgressMessage(callback);else this.showProgressMessage(callback)},this.displayError=function(provider,errorCondition,providerErrorText){jQuery("#providerLinkingMessages .provider-name").html(provider);var feedbackMsg=this.feedbackMessage("connect_error");if(errorCondition){var errorMsg=this.feedbackMessage(errorCondition);errorMsg&&(feedbackMsg=errorMsg)}providerErrorText&&$(".btn-logged-in-admin").length>0&&(feedbackMsg+=" Error: "+providerErrorText),this.feedbackContainer().removeClass("alert-info alert-success").addClass("alert alert-danger").html(feedbackMsg).slideDown()},this.displaySuccess=function(data,context,provider){var icon=provider.icon,htmlTarget=context.htmlTarget,targetLogin=context.targetLogin,targetRegister=context.targetRegister,displayName=provider.name,feedbackMsg="";switch(data.result){case"logged_in":case"2fa_needed":feedbackMsg=this.feedbackMessage("2fa_needed"),this.feedbackContainer().removeClass("alert-danger alert-warning alert-success").addClass("alert alert-info").html(feedbackMsg),window.location=data.redirect_url?decodeURIComponent(data.redirect_url):decodeURIComponent(context.redirectUrl);break;case"linking_complete":var accountInfo="";accountInfo=(accountInfo=data.remote_account.email?data.remote_account.email:data.remote_account.firstname+" "+data.remote_account.lastname).trim(),feedbackMsg=this.feedbackMessage("linking_complete").trim().replace(":displayName",displayName),accountInfo&&(feedbackMsg=feedbackMsg.replace(/\.$/," ("+accountInfo+").")),this.feedbackContainer().removeClass("alert-danger alert-warning alert-info").addClass("alert alert-success").html(icon+feedbackMsg);break;case"login_to_link":if(htmlTarget===targetLogin)feedbackMsg=this.feedbackMessage("login_to_link-signin-required"),this.feedbackContainer().removeClass("alert-danger alert-success alert-info").addClass("alert alert-warning").html(icon+feedbackMsg);else{var emailField=jQuery("input[name=email]"),firstNameField=jQuery("input[name=firstname]"),lastNameField=jQuery("input[name=lastname]");if(""===emailField.val()&&emailField.val(data.remote_account.email),""===firstNameField.val()&&firstNameField.val(data.remote_account.firstname),""===lastNameField.val()&&lastNameField.val(data.remote_account.lastname),htmlTarget===targetRegister)"object"==typeof WHMCS.client.registration&&WHMCS.client.registration.prefillPassword(),feedbackMsg=this.feedbackMessage("login_to_link-registration-required"),this.feedbackContainer().fadeOut("slow",(function(){$(this).removeClass("alert-danger alert-success alert-info").addClass("alert alert-warning").html(icon+feedbackMsg).fadeIn("fast")}));else{"object"==typeof WHMCS.client.registration&&WHMCS.client.registration.prefillPassword();var self=this;this.feedbackContainer().each((function(i,el){var container=$(el),linkContext=container.siblings("div .providerPreLinking").data("linkContext");container.fadeOut("slow",(function(){feedbackMsg="checkout-new"===linkContext?self.feedbackMessage("checkout-new"):self.feedbackMessage("login_to_link-signin-required"),container.removeClass("alert-danger alert-success alert-info").addClass("alert alert-warning").html(icon+feedbackMsg).fadeIn("fast")}))}))}}break;case"other_user_exists":feedbackMsg=this.feedbackMessage("other_user_exists"),this.feedbackContainer().removeClass("alert-info alert-success").addClass("alert alert-danger").html(icon+feedbackMsg).slideDown();break;case"already_linked":feedbackMsg=this.feedbackMessage("already_linked"),this.feedbackContainer().removeClass("alert-info alert-success").addClass("alert alert-danger").html(icon+feedbackMsg).slideDown();break;default:feedbackMsg=this.feedbackMessage("default"),this.feedbackContainer().removeClass("alert-info alert-success").addClass("alert alert-danger").html(icon+feedbackMsg).slideDown()}},this.signIn=function(config,context,provider,providerDone,providerError){jQuery.ajax(config).done((function(data){var table;providerDone(),WHMCS.authn.provider.displaySuccess(data,context,provider),jQuery("#tableLinkedAccounts").length&&WHMCS.ui.dataTable.getTableById("tableLinkedAccounts").ajax.reload()})).error((function(){providerError(),WHMCS.authn.provider.displayError()}))},this}}),
/**
 * WHMCS client module
 *
 * @copyright Copyright (c) WHMCS Limited 2005-2017
 * @license http://www.whmcs.com/license/ WHMCS Eula
 */
function(module){WHMCS.hasModule("client")||WHMCS.loadModule("client",module)}({registration:function(){return this.prefillPassword=function(params){if(void 0===(params=params||{}).hideContainer){var id=jQuery("#inputSecurityQId").attr("id")?"#containerPassword":"#containerNewUserSecurity";params.hideContainer=jQuery(id),params.hideInputs=!0}else"string"==typeof params.hideContainer&&params.hideContainer.length&&(params.hideContainer=jQuery(params.hideContainer));void 0===params.form&&(params.form={password:[{id:"inputNewPassword1"},{id:"inputNewPassword2"}]});var prefillFunc=function(){for(var $randomPasswd=WHMCS.utils.simpleRNG(),i=0,len=params.form.password.length;i<len;i++)jQuery("#"+params.form.password[i].id).val($randomPasswd).trigger("keyup")};params.hideInputs?params.hideContainer.slideUp("fast",prefillFunc):prefillFunc()},this}}),
/**
 * WHMCS HTTP module
 *
 * @copyright Copyright (c) WHMCS Limited 2005-2018
 * @license http://www.whmcs.com/license/ WHMCS Eula
 */
function(module){WHMCS.hasModule("http")||WHMCS.loadModule("http",module)}({jqClient:function(){return _getSettings=function(url,data,success,dataType){return"object"==typeof url?url:("function"==typeof data&&(success=data,data=null),{url:url,data:data,success:success,dataType:dataType})},this.get=function(url,data,success,dataType){return WHMCS.http.client.request(jQuery.extend(_getSettings(url,data,success,dataType),{type:"GET"}))},this.post=function(url,data,success,dataType){return WHMCS.http.client.request(jQuery.extend(_getSettings(url,data,success,dataType),{type:"POST"}))},this.jsonGet=function(options){options=options||{},this.get(options.url,options.data,(function(response){response.warning?(console.log("[WHMCS] Warning: "+response.warning),"function"==typeof options.warning&&options.warning(response.warning)):response.error?(console.log("[WHMCS] Error: "+response.error),"function"==typeof options.error&&options.error(response.error)):"function"==typeof options.success&&options.success(response)}),"json").error((function(xhr,errorMsg){console.log("[WHMCS] Error: "+errorMsg),"function"==typeof options.fail&&options.fail(errorMsg)})).always((function(){"function"==typeof options.always&&options.always()}))},this.jsonPost=function(options){options=options||{},this.post(options.url,options.data,(function(response){response.warning?(console.log("[WHMCS] Warning: "+response.warning),"function"==typeof options.warning&&options.warning(response.warning)):response.error?(console.log("[WHMCS] Error: "+response.error),"function"==typeof options.error&&options.error(response.error)):"function"==typeof options.success&&options.success(response)}),"json").fail((function(xhr,errorMsg){console.log("[WHMCS] Fail: "+errorMsg),"function"==typeof options.fail&&options.fail(errorMsg,xhr)})).always((function(){"function"==typeof options.always&&options.always()}))},this},client:function(){var methods=["get","post","put","delete"],client=this;return _beforeRequest=function(settings){return void 0===settings.type&&(settings.type="GET"),settings},this.request=function(settings){return settings=_beforeRequest(settings||{}),jQuery.ajax(settings)},jQuery.each(methods,(function(index,method){client[method]=function(method,client){return function(settings){return(settings=settings||{}).type=method.toUpperCase(),client.request(settings)}}(method,client)})),this}}),
/**
 * WHMCS UI module
 *
 * @copyright Copyright (c) WHMCS Limited 2005-2017
 * @license http://www.whmcs.com/license/ WHMCS Eula
 */
function(module){WHMCS.hasModule("ui")||WHMCS.loadModule("ui",module)}({confirmation:function(){var toggles=[];return this.register=function(rootSelector){return void 0===rootSelector&&(rootSelector="[data-toggle=confirmation]"),toggles.indexOf(rootSelector)<0&&toggles.push(rootSelector),jQuery(rootSelector).confirmation({rootSelector:rootSelector}),toggles},this},dataTable:function(){return this.tables={},this.register=function(){var self=this;jQuery("table.data-driven").each((function(i,table){self.getTableById(table.id,void 0)}))},this.getTableById=function(id,options){var self=this,el=jQuery("#"+id);if(void 0===this.tables[id])void 0===options&&(options={dom:'<"listtable"ift>pl',paging:!1,lengthChange:!1,searching:!1,ordering:!0,info:!1,autoWidth:!0,columns:[],lengthMenu:[10,25,50,100,500,1e3],language:{emptyTable:el.data("langEmptyTable")?el.data("langEmptyTable"):"No records found"}}),jQuery.each(el.data(),(function(key,value){if(void 0!==value)if("ajaxUrl"!==key)if("lengthChange"!==key){if("pageLength"!==key)return"langEmptyTable"===key?(void 0===options.language&&(options.language={}),void(options.language.emptyTable=value)):"langZeroRecords"===key?(void 0===options.language&&(options.language={}),void(options.language.zeroRecords=value)):void(options.key=value);options.pageLength=value}else options.lengthChange=value;else options.ajax={url:value}})),jQuery.each(el.find("th"),(function(){void 0===options.columns&&(options.columns=[]),options.columns.push({data:jQuery(this).data("name")})})),this.tables[id]=this.initTable(el,options);else if(void 0!==options){var oldTable=this.tables[id],initOpts=oldTable.init(),newOpts=jQuery.extend(initOpts,options);oldTable.destroy(),this.tables[id]=this.initTable(el,newOpts)}return this.tables[id]},this.initTable=function(el,options){var table=el.DataTable(options),self=this;return el.data("on-draw")?table.on("draw.dt",(function(e,settings){var namedCallback=el.data("on-draw");"function"==typeof window[namedCallback]&&window[namedCallback](e,settings)})):el.data("on-draw-rebind-confirmation")&&table.on("draw.dt",(function(e){self.rebindConfirmation(e)})),table},this.rebindConfirmation=function(e){for(var self=this,tableId=e.target.id,toggles=WHMCS.ui.confirmation.register(),i=0,len=toggles.length;i<len;i++)jQuery(toggles[i]).on("confirmed.bs.confirmation",(function(e){e.preventDefault(),WHMCS.http.jqClient.post(jQuery(e.target).data("target-url"),{token:csrfToken}).done((function(data){"success"!==data.status&&"okay"!==data.status||self.getTableById(tableId,void 0).ajax.reload()}))}))},this},clipboard:function(){return this.copy=function(e){e.preventDefault();var trigger=$(e.currentTarget),contentElement=$(trigger).data("clipboard-target"),container=$(contentElement).parent();try{var tempElement=$("<textarea>").css("position","fixed").css("opacity","0").css("width","1px").css("height","1px").val($(contentElement).val());container.append(tempElement),tempElement.focus().select(),document.execCommand("copy")}finally{tempElement.remove()}trigger.tooltip({trigger:"click",placement:"bottom"}),WHMCS.ui.toolTip.setTip(trigger,"Copied!"),WHMCS.ui.toolTip.hideTip(trigger)},this},toolTip:function(){this.setTip=function(btn,message){var tip=btn.data("bs.tooltip");return"in"!==tip.hoverState&&(tip.hoverState="in"),btn.attr("data-original-title",message),tip.show(),tip},this.hideTip=function(btn){return setTimeout((function(){btn.data("bs.tooltip").hide()}),2e3)}},jsonForm:function(){return this.managedElements="input,textarea,select",this.initFields=function(form){var self=this;$(form).find(self.managedElements).each((function(){var field=this;$(field).on("keypress change",(function(){self.fieldHasError(field)&&self.clearFieldError(field)}))}))},this.init=function(form){var self=this;self.initFields(form),$(form).on("submit",(function(e){e.preventDefault(),e.stopPropagation(),self.clearErrors(form);var formModal=$(form).parents('.modal[role="dialog"]').first();$(formModal).length&&($(formModal).on("show.bs.modal hidden.bs.modal",(function(){self.clearErrors(form)})),$(formModal).on("show.bs.modal",(function(){$(form)[0].reset()}))),WHMCS.http.client.post({url:$(form).attr("action"),data:$(form).serializeArray()}).done((function(response){self.onSuccess(form,response)})).fail((function(jqXHR){self.onError(form,jqXHR)})).always((function(data){self.onRequestComplete(form,data)}))}))},this.initAll=function(){var self=this;$('form[data-role="json-form"]').each((function(){var formElement=this;self.init(this)}))},this.markFieldErrors=function(form,fields){var self=this,errorMessage=null,field,fieldLookup;for(var fieldName in fields)fields.hasOwnProperty(fieldName)&&(errorMessage=fields[fieldName]),fieldLookup=this.managedElements.split(",").map((function(element){return element+'[name="'+fieldName+'"]'})).join(","),field=$(form).find(fieldLookup),errorMessage&&($(field).parents(".form-group").addClass("has-error"),$(field).attr("title",errorMessage),$(field).tooltip());$(form).find(".form-group.has-error input[title]").first().tooltip("show")},this.fieldHasError=function(field){return $(field).parents(".form-group").hasClass("has-error")},this.clearFieldError=function(field){try{$(field).tooltip("dispose")}catch(err){$(field).tooltip("destroy")}$(field).parents(".form-group").removeClass("has-error")},this.onSuccess=function(form,response){var formOnSuccess=$(form).data("on-success");"function"==typeof formOnSuccess&&formOnSuccess(response.data)},this.onError=function(form,jqXHR){jqXHR.responseJSON&&jqXHR.responseJSON.fields&&"object"==typeof jqXHR.responseJSON.fields?this.markFieldErrors(form,jqXHR.responseJSON.fields):console.log("Unknown error - please try again later.");var formOnError=$(form).data("on-error");"function"==typeof formOnError&&formOnError(jqXHR)},this.clearErrors=function(form){var self=this;$(form).find(self.managedElements).each((function(){self.clearFieldError(this)}))},this.onRequestComplete=function(form,data){},this},effects:function(){this.errorShake=function(element){options=options||{};var options=$.extend({direction:"left",distance:8,times:3,speed:90},options);return element.each((function(){var el=$(this),props={position:el.css("position"),top:el.css("top"),bottom:el.css("bottom"),left:el.css("left"),right:el.css("right")};el.css("position","relative");var ref="up"===options.direction||"down"===options.direction?"top":"left",motion="up"===options.direction||"left"===options.direction?"pos":"neg",animation={},animation1={},animation2={};animation[ref]=("pos"===motion?"-=":"+=")+options.distance,animation1[ref]=("pos"===motion?"+=":"-=")+2*options.distance,animation2[ref]=("pos"===motion?"-=":"+=")+2*options.distance,el.animate(animation,options.speed);for(var i=1;i<options.times;i++)el.animate(animation1,options.speed).animate(animation2,options.speed);el.animate(animation1,options.speed).animate(animation,options.speed/2,(function(){el.css(props)}))}))}}}),
/**
 * Form module
 *
 * @copyright Copyright (c) WHMCS Limited 2005-2017
 * @license http://www.whmcs.com/license/ WHMCS Eula
 */
function(module){WHMCS.hasModule("form")||WHMCS.loadModule("form",module)}((function(){return this.checkAllBound=!1,this.register=function(){this.checkAllBound||(this.bindCheckAll(),this.checkAllBound=!0)},this.bindCheckAll=function(){var huntSelector=".btn-check-all";jQuery("body").on("click",huntSelector,(function(e){var btn=jQuery(e.target),targetInputs=jQuery("#"+btn.data("checkbox-container")+' input[type="checkbox"]');if(btn.data("btn-check-toggle")){var textDeselect="Deselect All",textSelect="Select All";btn.data("label-text-deselect")&&(textDeselect=btn.data("label-text-deselect")),btn.data("label-text-select")&&(textSelect=btn.data("label-text-select")),btn.hasClass("toggle-active")?(targetInputs.prop("checked",!1),btn.text(textSelect),btn.removeClass("toggle-active")):(targetInputs.prop("checked",!0),btn.text(textDeselect),btn.addClass("toggle-active"))}else btn.data("btn-toggle-on")?targetInputs.prop("checked",!0):targetInputs.prop("checked",!1)}))},this.reloadCaptcha=function(element){if("undefined"!=typeof grecaptcha)grecaptcha.reset();else{element||(element=jQuery("#inputCaptchaImage"));var src=jQuery(element).data("src");jQuery(element).attr("src",src+"?nocache="+(new Date).getTime());var userInput=jQuery("#inputCaptcha");userInput.length&&userInput.val("")}},this}));
/**
 * reCaptcha module
 *
 * @copyright Copyright (c) WHMCS Limited 2005-2020
 * @license http://www.whmcs.com/license/ WHMCS Eula
 */
var recaptchaLoadComplete=!1,recaptchaCount=0,recaptchaType="recaptcha",recaptchaValidationComplete=!1;!function(module){WHMCS.hasModule("recaptcha")||WHMCS.loadModule("recaptcha",module)}((function(){return this.register=function(){if(!recaptchaLoadComplete){var postLoad=[],recaptchaForms=jQuery(".btn-recaptcha").parents("form"),isInvisible=!1;if(recaptchaForms.each((function(i,el){if("undefined"!=typeof recaptchaSiteKey){recaptchaCount+=1;var frm=jQuery(el),btnRecaptcha=frm.find(".btn-recaptcha"),required="undefined"!=typeof requiredText?requiredText:"Required",recaptchaId="divDynamicRecaptcha"+recaptchaCount;isInvisible=btnRecaptcha.hasClass("btn-recaptcha-invisible");var recaptchaContent=frm.find("#"+recaptchaId+" .g-recaptcha"),recaptchaElement=frm.find(".recaptcha-container"),appendElement=frm;recaptchaElement.length&&(recaptchaElement.attr("id",recaptchaElement.attr("id")+recaptchaCount),appendElement=recaptchaElement),recaptchaContent.length||(appendElement.append('<div id="#'+recaptchaId+'" class="g-recaptcha"></div>'),recaptchaContent=appendElement.find("#"+recaptchaId)),isInvisible||recaptchaContent.data("toggle","tooltip").data("placement","bottom").data("trigger","manual").attr("title",required).hide();var btnSubmit=frm.find("input[name='submit']"),funcName;if(btnSubmit.length){var action=frm.prop("action");frm.prop("action",action+"&submit=1"),btnSubmit.remove()}window[recaptchaId+"Callback"]=function(){isInvisible&&frm.submit()},isInvisible?(recaptchaType="invisible",frm.on("submit.recaptcha",(function(event){var recaptchaId=frm.find(".g-recaptcha").data("recaptcha-id");grecaptcha.getResponse(recaptchaId).trim()?recaptchaValidationComplete=!0:(event.preventDefault(),grecaptcha.execute(recaptchaId),recaptchaValidationComplete=!1)}))):(postLoad.push((function(){recaptchaContent.slideDown("fast",(function(){recaptchaContent.find(":first").addClass("center-block")}))})),postLoad.push((function(){recaptchaContent.find(":first").addClass("center-block")})))}else console.log("Recaptcha site key not defined")})),window.recaptchaLoadCallback=function(){jQuery(".g-recaptcha").each((function(i,el){var element=jQuery(el),frm,btn=element.closest("form").find(".btn-recaptcha"),idToUse=element.attr("id").substring(1),recaptchaId=grecaptcha.render(el,{sitekey:recaptchaSiteKey,size:btn.hasClass("btn-recaptcha-invisible")?"invisible":"normal",callback:idToUse+"Callback"});element.data("recaptcha-id",recaptchaId)}))},recaptchaForms.length){var gUrl="https://www.google.com/recaptcha/api.js?onload=recaptchaLoadCallback&render=explicit";jQuery.getScript(gUrl,(function(){for(var i=postLoad.length-1;i>=0;i--)postLoad[i]()}))}recaptchaLoadComplete=!0}},this})),
/**
 * General utilities module
 *
 * @copyright Copyright (c) WHMCS Limited 2005-2017
 * @license http://www.whmcs.com/license/ WHMCS Eula
 */
function(module){WHMCS.hasModule("utils")||WHMCS.loadModule("utils",module)}((function(){return this.simpleRNG=function(){for(var chars="./$_-#!,^*()|",r=0,i=0;r<3;i++)r+=Math.floor(10*Math.random()/2);r=Math.floor(r);for(var s="",x=0;x<r;x++)v=(Math.random()+1).toString(24).split(".")[1],Math.random()>.5?s+=btoa(v).substr(0,4):s+=v,Math.random()>.5&&(s+=chars.substr(Math.floor(13*Math.random()),1));return s},this.getRouteUrl=function(path){return whmcsBaseUrl+"/index.php?rp="+path},this.validateBaseUrl=function(){void 0===window.whmcsBaseUrl?(console.log("Warning: The WHMCS Base URL definition is missing from your active template. Please refer to https://docs.whmcs.com/WHMCS_Base_URL_Template_Variable for more information and details of how to resolve this warning."),window.whmcsBaseUrl=this.autoDetermineBaseUrl(),window.whmcsBaseUrlAutoSet=!0):""===window.whmcsBaseUrl&&void 0!==window.whmcsBaseUrlAutoSet&&!0===window.whmcsBaseUrlAutoSet&&(window.whmcsBaseUrl=this.autoDetermineBaseUrl())},this.autoDetermineBaseUrl=function(){var windowLocation=window.location.href,phpExtensionLocation=-1;if(void 0!==windowLocation&&(phpExtensionLocation=windowLocation.indexOf(".php")),-1===phpExtensionLocation&&void 0!==(windowLocation=jQuery("#Primary_Navbar-Home a").attr("href"))&&(phpExtensionLocation=windowLocation.indexOf(".php")),-1!==phpExtensionLocation){var lastTrailingSlash=(windowLocation=windowLocation.substring(0,phpExtensionLocation)).lastIndexOf("/");if(!1!==lastTrailingSlash)return windowLocation.substring(0,lastTrailingSlash)}return""},this.normaliseStringValue=function(status){return status?status.toLowerCase().replace(/\s/g,"-"):""},this.generatePassword=function(len){for(var charset=this.getPasswordCharacterSet(),result="",i=0;len>i;i++)result+=charset[this.randomInt(charset.length)];return result},this.getPasswordCharacterSet=function(){for(var rawCharset="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!#$%()*+,-.:;=@_|{ldelim}{rdelim}~",charset=[],i=0;rawCharset.length>i;i++){var c=rawCharset.charCodeAt(i);if(!(55296>c||c>=57344)){if(56320>c&&rawCharset.length>i+1){var d=rawCharset.charCodeAt(i+1);if(d>=56320&&57344>d){var s=rawCharset.substring(i,i+2);i++,-1==charset.indexOf(s)&&charset.push(s);continue}}throw"Invalid UTF-16"}var s=rawCharset.charAt(i);-1==charset.indexOf(s)&&charset.push(s)}return charset},this.randomInt=function(n){var x=this.randomIntMathRandom(n);return x=(x+this.randomIntBrowserCrypto(n))%n},this.randomIntMathRandom=function(n){var x=Math.floor(Math.random()*n);if(0>x||x>=n)throw"Arithmetic exception";return x},this.randomIntBrowserCrypto=function(n){var cryptoObject=null;if("crypto"in window)cryptoObject=crypto;else{if(!("msCrypto"in window))return 0;cryptoObject=msCrypto}if("getRandomValues"in cryptoObject&&"Uint32Array"in window&&"function"==typeof Uint32Array||(cryptoObject=null),null==cryptoObject)return 0;var x=new Uint32Array(1);do{cryptoObject.getRandomValues(x)}while(x[0]-x[0]%n>4294967296-n);return x[0]%n},this})),WHMCS.utils.validateBaseUrl(),"undefined"==typeof localTrans&&(localTrans=function(phraseId,fallback){return"undefined"!=typeof _localLang&&void 0!==_localLang[phraseId]&&_localLang[phraseId].length>0?_localLang[phraseId]:fallback});var domainLookupCallCount,checkoutForm,furtherSuggestions,hideCvcOnCheckoutForExistingCard=0;function validateCheckoutCreditCardInput(e){var newOrExisting=jQuery('input[name="ccinfo"]:checked').val(),submitButton=checkoutForm.find('*[type="submit"]'),cardType=null,submit=!0,selectedPaymentMethod=checkoutForm.find('input[name="paymentmethod"]:checked'),isCreditCardGateway=selectedPaymentMethod.hasClass("is-credit-card"),isRemoteCard="RemoteCreditCard"===selectedPaymentMethod.data("payment-type"),cardNumber=jQuery("#inputCardNumber");if(checkoutForm.find(".form-group").removeClass("has-error"),checkoutForm.find(".field-error-msg").hide(),isCreditCardGateway&&!isRemoteCard){var cvvField=checkoutForm.find("#inputCardCVV2");if("new"===newOrExisting){if(cvvField=checkoutForm.find("#inputCardCVV"),cardType=jQuery.payment.cardType(checkoutForm.find("#inputCardNumber").val()),!jQuery.payment.validateCardNumber(checkoutForm.find("#inputCardNumber").val())||cardNumber.hasClass("unsupported")){var error=cardNumber.data("message-invalid");cardNumber.hasClass("unsupported")&&(error=cardNumber.data("message-unsupported")),checkoutForm.find("#inputCardNumber").setInputError(error).showInputError(),submit=!1}jQuery.payment.validateCardExpiry(checkoutForm.find("#inputCardExpiry").payment("cardExpiryVal"))||(checkoutForm.find("#inputCardExpiry").showInputError(),submit=!1)}cvvField.is(":visible")&&!jQuery.payment.validateCardCVC(cvvField.val(),cardType)&&(cvvField.showInputError(),submit=!1),submit||(submitButton.prop("disabled",!1).removeClass("disabled").find("i").removeAttr("class").addClass("fas fa-arrow-circle-right"),e.preventDefault())}}function hasDomainLookupEnded(){3==++domainLookupCallCount&&jQuery("#btnCheckAvailability").removeAttr("disabled").removeClass("disabled")}function hasProductDomainLookupEnded(total,button){++domainLookupCallCount==total&&(button.removeAttr("disabled").removeClass("disabled"),jQuery('input[name="domainoption"]').iCheck("enable"))}function domainGotoNextStep(){jQuery("#domainLoadingSpinner").show(),jQuery("#frmProductDomainSelections").submit()}function removeItem(type,num){jQuery("#inputRemoveItemType").val(type),jQuery("#inputRemoveItemRef").val(num),jQuery("#modalRemoveItem").modal("show")}function updateConfigurableOptions(i,billingCycle){WHMCS.http.jqClient.post(whmcsBaseUrl+"/cart.php","a=cyclechange&ajax=1&i="+i+"&billingcycle="+billingCycle,(function(data){jQuery("#productConfigurableOptions").html(jQuery(data).find("#productConfigurableOptions").html()),jQuery("input").iCheck({inheritID:!0,checkboxClass:"icheckbox_square-blue",radioClass:"iradio_square-blue",increaseArea:"20%"})})),recalctotals()}function recalctotals(){jQuery("#orderSummaryLoader").is(":visible")||jQuery("#orderSummaryLoader").fadeIn("fast");var thisRequestId=Math.floor(1e6*Math.random()+1);window.lastSliderUpdateRequestId=thisRequestId;var post=WHMCS.http.jqClient.post(whmcsBaseUrl+"/cart.php","ajax=1&a=confproduct&calctotal=true&"+jQuery("#frmConfigureProduct").serialize());post.done((function(data){thisRequestId==window.lastSliderUpdateRequestId&&jQuery("#producttotal").html(data)})),post.always((function(){jQuery("#orderSummaryLoader").delay(500).fadeOut("slow")}))}function recalculateRenewalTotals(){jQuery("#orderSummaryLoader").is(":visible")||jQuery("#orderSummaryLoader").fadeIn("fast");var thisRequestId=Math.floor(1e6*Math.random()+1);window.lastSliderUpdateRequestId=thisRequestId,WHMCS.http.jqClient.get(WHMCS.utils.getRouteUrl("/cart/domain/renew/calculate")).done((function(data){thisRequestId===window.lastSliderUpdateRequestId&&jQuery("#producttotal").html(data.body)})).always((function(){jQuery("#orderSummaryLoader").delay(500).fadeOut("slow")}))}function selectDomainPricing(domainName,price,period,yearsString,suggestionNumber){jQuery("#domainSuggestion"+suggestionNumber).iCheck("check"),jQuery("[name='domainsregperiod["+domainName+"]']").val(period),jQuery("[name='"+domainName+"-selected-price']").html('<b class="glyphicon glyphicon-shopping-cart"></b> '+period+" "+yearsString+" @ "+price)}function selectDomainPeriodInCart(domainName,price,period,yearsString){var loader=jQuery("#orderSummaryLoader");loader.not(":visible")&&loader.fadeIn("fast"),jQuery("[name='"+domainName+"Pricing']").html(period+" "+yearsString+' <span class="caret"></span>'),jQuery("[name='"+domainName+"Price']").html(price);var update=WHMCS.http.jqClient.post(window.location.pathname,{domain:domainName,period:period,a:"updateDomainPeriod",token:csrfToken});update.done((function(data){var recurringSpan;data.forceReload?window.location.reload():(data.domains.forEach((function(domain){jQuery("[name='"+domain.domain+"Price']").parent("div").find(".renewal-price").html(domain.prefixedRenewPrice+domain.shortRenewalYearsLanguage)})),jQuery("#subtotal").html(data.subtotal),data.promotype&&jQuery("#discount").html(data.discount),data.taxrate&&jQuery("#taxTotal1").html(data.taxtotal),data.taxrate2&&jQuery("#taxTotal2").html(data.taxtotal2),jQuery("#recurring").find("span:visible").not("span.cost").fadeOut("fast"),data.totalrecurringannually&&jQuery("#recurringAnnually").fadeIn("fast").find(".cost").html(data.totalrecurringannually),data.totalrecurringbiennially&&jQuery("#recurringBiennially").fadeIn("fast").find(".cost").html(data.totalrecurringbiennially),data.totalrecurringmonthly&&jQuery("#recurringMonthly").fadeIn("fast").find(".cost").html(data.totalrecurringmonthly),data.totalrecurringquarterly&&jQuery("#recurringQuarterly").fadeIn("fast").find(".cost").html(data.totalrecurringquarterly),data.totalrecurringsemiannually&&jQuery("#recurringSemiAnnually").fadeIn("fast").find(".cost").html(data.totalrecurringsemiannually),data.totalrecurringtriennially&&jQuery("#recurringTriennially").fadeIn("fast").find(".cost").html(data.totalrecurringtriennially),jQuery("#totalDueToday").html(data.total))})),update.always((function(){loader.delay(500).fadeOut("slow")}))}function loadMoreSuggestions(){var suggestions=jQuery("#domainSuggestions"),suggestionCount;for(suggestionCount=1;suggestionCount<=10;suggestionCount++){if(!(furtherSuggestions>0))return void jQuery("div.more-suggestions").find("a").addClass("hidden").end().find("span.no-more").removeClass("hidden");suggestions.find("div.domain-suggestion.clone:hidden:first").slideDown(),furtherSuggestions=suggestions.find("div.domain-suggestion.clone:hidden").length}}function validate_captcha(form){var reCaptcha=jQuery("#g-recaptcha-response"),reCaptchaContainer=jQuery("#divDynamicRecaptcha"),captcha=jQuery("#inputCaptcha"),validate;return reCaptcha.length&&!reCaptcha.val()?(reCaptchaContainer.tooltip("show"),!1):captcha.length&&!captcha.val()?(captcha.tooltip("show"),!1):void WHMCS.http.jqClient.post(form.attr("action"),form.serialize()+"&a=validateCaptcha",null,"json").done((function(data){data.error?(jQuery("#inputCaptcha").attr("data-original-title",data.error).tooltip("show"),captcha.length&&jQuery("#inputCaptchaImage").replaceWith('<img id="inputCaptchaImage" src="'+whmcsBaseUrl+"/includes/verifyimage.php?nocache="+(new Date).getTime()+'" align="middle" />')):(jQuery("#captchaContainer").remove(),form.trigger("submit"))}))}function selectPreferredCard(){var methods=jQuery('input[name="ccinfo"]:visible'),select=methods.first(),preferred=methods.filter("[data-order-preference=0]");preferred.length&&(select=preferred),select.iCheck("check")}jQuery(document).ready((function(){jQuery("#order-standard_cart").find("input").not(".no-icheck").iCheck({inheritID:!0,checkboxClass:"icheckbox_square-blue",radioClass:"iradio_square-blue",increaseArea:"20%"}),jQuery(".mc-promo .header").click((function(e){e.preventDefault(),jQuery(e.target).is(".btn, .btn span,.btn .fa")||(jQuery(this).parent().find(".rotate").toggleClass("down"),jQuery(this).parent().find(".body").slideToggle("fast"))})),jQuery(".mc-promos.viewcart .mc-promo:first-child .header").click();var cardNumber=jQuery("#inputCardNumber"),existingCvv=jQuery("#inputCardCVV2");cardNumber.length&&(cardNumber.payment("formatCardNumber"),jQuery("#inputCardCVV").payment("formatCardCVC"),jQuery("#inputCardStart").payment("formatCardExpiry"),jQuery("#inputCardExpiry").payment("formatCardExpiry"),jQuery("#inputCardNumber").keyup((function(){var cardType=jQuery.payment.cardType(jQuery(this).val());if(null!=cardType){var $cc_visual=card_type_get_visual(cardType);jQuery("#selectedCardType span.type").text($cc_visual),jQuery("input#cctype").val($cc_visual),jQuery("#selectedCardType").find("i.fa").attr("class","fa "+card_type_get_fontawesome(cardType))}}))),existingCvv.length&&existingCvv.payment("formatCardCVC");var $orderSummaryEl=jQuery("#orderSummary");if($orderSummaryEl.length){var offset=jQuery("#scrollingPanelContainer").parent(".row").offset(),maxTopOffset=jQuery("#scrollingPanelContainer").parent(".row").outerHeight()-35,topPadding=15;jQuery(window).resize((function(){offset=jQuery("#scrollingPanelContainer").parent(".row").offset(),maxTopOffset=jQuery("#scrollingPanelContainer").parent(".row").outerHeight()-35,repositionScrollingSidebar()})),jQuery(window).scroll((function(){repositionScrollingSidebar()})),repositionScrollingSidebar()}function repositionScrollingSidebar(){if("none"===jQuery("#scrollingPanelContainer").css("float"))return $orderSummaryEl.stop().css("margin-top","0"),!1;var heightOfOrderSummary=$orderSummaryEl.outerHeight(),offsetTop=0;void 0!==offset&&(offsetTop=offset.top);var newTopOffset=jQuery(window).scrollTop()-offsetTop+topPadding;newTopOffset>maxTopOffset-heightOfOrderSummary&&(newTopOffset=maxTopOffset-heightOfOrderSummary),jQuery(window).scrollTop()>offsetTop?$orderSummaryEl.stop().animate({marginTop:newTopOffset}):$orderSummaryEl.stop().animate({marginTop:0})}function repositionScrollingSidebar(){if("none"===jQuery("#scrollingPanelContainer").css("float"))return $orderSummaryEl.stop().css("margin-top","0"),!1;var heightOfOrderSummary=$orderSummaryEl.outerHeight(),newTopOffset=jQuery(window).scrollTop()-offset.top;newTopOffset>maxTopOffset-heightOfOrderSummary&&(newTopOffset=maxTopOffset-heightOfOrderSummary);var sidebarWidth=jQuery("#scrollingPanelContainer").width(),sidebarTopMargin=20;jQuery(window).scrollTop()>offset.top+20?$orderSummaryEl.css({position:"fixed",top:"20px",width:sidebarWidth}):$orderSummaryEl.css({position:"static",top:"auto"})}if(jQuery(window).resize((function(){"left"!=jQuery("#scrollingPanelContainer").css("float")&&$orderSummaryEl.css("position","static"),$orderSummaryEl.css({width:jQuery("#scrollingPanelContainer").width()})})),jQuery("#frmConfigureProduct").submit((function(e){e.preventDefault();var button=jQuery("#btnCompleteProductConfig"),btnOriginalText=jQuery(button).html();jQuery(button).find("i").removeClass("fa-arrow-circle-right").addClass("fa-spinner fa-spin"),WHMCS.http.jqClient.post(whmcsBaseUrl+"/cart.php","ajax=1&a=confproduct&"+jQuery("#frmConfigureProduct").serialize(),(function(data){data?(jQuery("#btnCompleteProductConfig").html(btnOriginalText),jQuery("#containerProductValidationErrorsList").html(data),jQuery("#containerProductValidationErrors").show(),jQuery(window).scrollTop()>jQuery("#containerProductValidationErrors").offset().top&&jQuery("html, body").scrollTop(jQuery("#containerProductValidationErrors").offset().top-15)):window.location=whmcsBaseUrl+"/cart.php?a=confdomains"}))})),jQuery("#productConfigurableOptions").on("ifChecked","input",(function(){recalctotals()})),jQuery("#productConfigurableOptions input[type=checkbox]").on("ifUnchecked","input",(function(){recalctotals()})),jQuery("#productConfigurableOptions").on("change","select",(function(){recalctotals()})),jQuery(".addon-products").on("click",".panel-addon",(function(e){e.preventDefault();var $activeAddon=jQuery(this);$activeAddon.hasClass("panel-addon-selected")?$activeAddon.find('input[type="checkbox"]').iCheck("uncheck"):$activeAddon.find('input[type="checkbox"]').iCheck("check")})),jQuery(".addon-products").on("ifChecked",".panel-addon input",(function(event){var $activeAddon=jQuery(this).parents(".panel-addon");$activeAddon.addClass("panel-addon-selected"),$activeAddon.find('input[type="checkbox"]').iCheck("check"),$activeAddon.find(".panel-add").html('<i class="fas fa-shopping-cart"></i> '+localTrans("addedToCartRemove","Added to Cart (Remove)")),recalctotals()})),jQuery(".addon-products").on("ifUnchecked",".panel-addon input",(function(event){var $activeAddon=jQuery(this).parents(".panel-addon");$activeAddon.removeClass("panel-addon-selected"),$activeAddon.find('input[type="checkbox"]').iCheck("uncheck"),$activeAddon.find(".panel-add").html('<i class="fas fa-plus"></i> '+localTrans("addToCart","Add to Cart")),recalctotals()})),jQuery("#frmConfigureProduct").on("ifChecked",".addon-selector",(function(event){recalctotals()})),0==jQuery(".domain-selection-options input:checked").length){var firstInput=jQuery(".domain-selection-options input:first");jQuery(firstInput).iCheck("check"),jQuery(firstInput).parents(".option").addClass("option-selected")}jQuery("#domain"+jQuery(".domain-selection-options input:checked").val()).show(),jQuery(".domain-selection-options input").on("ifChecked",(function(event){jQuery(".domain-selection-options .option").removeClass("option-selected"),jQuery(this).parents(".option").addClass("option-selected"),jQuery(".domain-input-group").hide(),jQuery("#domain"+jQuery(this).val()).show()})),jQuery("#frmProductDomain").submit((function(e){e.preventDefault();var btnSearchObj=jQuery(this).find('button[type="submit"]'),domainSearchResults=jQuery("#DomainSearchResults"),spotlightTlds=jQuery("#spotlightTlds"),suggestions=jQuery("#domainSuggestions"),btnDomainContinue=jQuery("#btnDomainContinue"),domainoption=jQuery(".domain-selection-options input:checked").val(),sldInput=jQuery("#"+domainoption+"sld"),sld=sldInput.val(),tld="",pid=jQuery("#frmProductDomainPid").val(),tldInput="",idnLanguage=jQuery("#idnLanguageSelector");if(jQuery(".field-error-msg").hide(),idnLanguage.is(":visible")&&(idnLanguage.slideUp(),idnLanguage.find("select").val("")),"incart"==domainoption)sld=(sldInput=jQuery("#"+domainoption+"sld option:selected")).text();else if("subdomain"==domainoption)tld=(tldInput=jQuery("#"+domainoption+"tld option:selected")).text();else{if(tld=(tldInput=jQuery("#"+domainoption+"tld")).val(),sld&&!tld)return tldInput.tooltip("show"),tldInput.focus(),!1;"."!=tld.substr(0,1)&&(tld="."+tld)}if(!sld)return sldInput.tooltip("show"),sldInput.focus(),!1;if(sldInput.tooltip("hide"),tldInput.length&&tldInput.tooltip("hide"),jQuery('input[name="domainoption"]').iCheck("disable"),domainLookupCallCount=0,btnSearchObj.attr("disabled","disabled").addClass("disabled"),jQuery(".domain-lookup-result").hide(),jQuery("#primaryLookupResult div").filter((function(){return 0===$(this).closest("#idnLanguageSelector").length})).hide(),jQuery("#primaryLookupResult").find(".register-price-label").show().end().find(".transfer-price-label").hide(),jQuery(".domain-lookup-register-loader").hide(),jQuery(".domain-lookup-transfer-loader").hide(),jQuery(".domain-lookup-other-loader").hide(),"register"==domainoption?jQuery(".domain-lookup-register-loader").show():"transfer"==domainoption?jQuery(".domain-lookup-transfer-loader").show():jQuery(".domain-lookup-other-loader").show(),jQuery(".domain-lookup-loader").show(),suggestions.find("div:not(.actions)").hide().end().find(".clone").remove(),jQuery("div.panel-footer.more-suggestions").hide().find("a").show().end().find("span.no-more").hide(),jQuery(".btn-add-to-cart").removeAttr("disabled").find("span").hide().end().find("span.to-add").show(),btnDomainContinue.hide().attr("disabled","disabled"),"register"!=domainoption&&(spotlightTlds.hide(),jQuery(".suggested-domains").hide()),domainSearchResults.is(":visible")||domainSearchResults.fadeIn(),"register"==domainoption){spotlightTlds.fadeIn("fast"),jQuery("#resultDomainOption").val(domainoption);var lookup=WHMCS.http.jqClient.post(WHMCS.utils.getRouteUrl("/domain/check"),{token:csrfToken,type:"domain",domain:sld+tld,sld:sld,tld:tld,source:"cartAddDomain"},"json"),spotlight=WHMCS.http.jqClient.post(WHMCS.utils.getRouteUrl("/domain/check"),{token:csrfToken,type:"spotlight",domain:sld+tld,sld:sld,tld:tld,source:"cartAddDomain"},"json"),suggestion=WHMCS.http.jqClient.post(WHMCS.utils.getRouteUrl("/domain/check"),{token:csrfToken,type:"suggestions",domain:sld+tld,sld:sld,tld:tld,source:"cartAddDomain"},"json");lookup.done((function(data){jQuery.each(data.result,(function(index,domain){var pricing=null,result=jQuery("#primaryLookupResult"),available=result.find(".domain-available"),availablePrice=result.find(".domain-price"),unavailable=result.find(".domain-unavailable"),invalid=result.find(".domain-invalid"),contactSupport=result.find(".domain-contact-support"),resultDomain=jQuery("#resultDomain"),resultDomainPricing=jQuery("#resultDomainPricingTerm"),error=result.find(".domain-error");if(result.show(),jQuery(".domain-lookup-primary-loader").hide(),"string"!=typeof domain&&!domain.error&&domain.isValidDomain)error.hide(),pricing=domain.pricing,domain.isAvailable&&"string"!=typeof pricing?(domain.domainName!==domain.idnDomainName&&idnLanguage.not(":visible")&&idnLanguage.slideDown(),domain.preferredTLDNotAvailable&&unavailable.show().find("strong").html(domain.originalUnavailableDomain),contactSupport.hide(),available.show().find("strong").html(domain.domainName),availablePrice.show().find("span.price").html(pricing[Object.keys(pricing)[0]].register).end().find("button").attr("data-domain",domain.domainName),resultDomain.val(domain.domainName),resultDomainPricing.val(Object.keys(pricing)[0]).attr("name","domainsregperiod["+domain.domainName+"]"),btnDomainContinue.removeAttr("disabled")):(unavailable.show().find("strong").html(domain.domainName),contactSupport.hide(),"string"==typeof pricing&&"ContactUs"==pricing&&contactSupport.show());else{var done=!1,reg=/<br\s*\/>/,errors=[];if(!domain.isValidDomain&&domain.domainErrorMessage)invalid.text(domain.domainErrorMessage);else if(domain.error||"error"===index){if("string"==typeof domain)error.text(domain);else if(domain.error.match(reg)){error.text(""),errors=domain.error.split(reg);for(var i=0;i<errors.length;i++){var errorMsg=errors[i];errorMsg.length&&(error.text()&&error.append("<br />"),error.append(jQuery("<span></span>").text(errorMsg)))}}else error.text(domain.error);error.show(),done=!0}done||invalid.show()}}))})).always((function(){hasProductDomainLookupEnded(3,btnSearchObj)})),spotlight.done((function(data){"object"!=typeof data||0==data.result.length||data.result.error?jQuery(".domain-lookup-spotlight-loader").hide():jQuery.each(data.result,(function(index,domain){var tld=domain.tldNoDots,pricing=domain.pricing,result=jQuery("#spotlight"+tld+" .domain-lookup-result");jQuery(".domain-lookup-spotlight-loader").hide(),result.find("button").hide(),domain.isValidDomain?domain.isAvailable&&"string"!=typeof pricing?(domain.domainName!==domain.idnDomainName&&idnLanguage.not(":visible")&&idnLanguage.slideDown(),result.find("span.available").html(pricing[Object.keys(pricing)[0]].register).show().end().find("button.btn-add-to-cart").attr("data-domain",domain.domainName).show(),result.find("button.domain-contact-support").hide()):"string"==typeof pricing?(""==pricing?result.find("button.unavailable").show():result.find("button.domain-contact-support").show(),result.find("span.available").hide()):(result.find("button.unavailable").show(),result.find("span.available").hide()):result.find("button.invalid:hidden").show().end().find("span.available").hide().end().find("button").not("button.invalid").hide(),result.show()}))})).always((function(){hasProductDomainLookupEnded(3,btnSearchObj)})),suggestion.done((function(data){if("object"!=typeof data||0==data.result.length||data.result.error)jQuery(".suggested-domains").fadeOut("fast",(function(){jQuery(this).hide()}));else{jQuery(".suggested-domains").show();var suggestionCount=1;jQuery.each(data.result,(function(index,domain){var tld=domain.tld,pricing=domain.pricing;suggestions.find("div:first").clone(!0,!0).appendTo(suggestions);var newSuggestion=suggestions.find("div.domain-suggestion").last();newSuggestion.addClass("clone").find("span.domain").html(domain.sld).end().find("span.extension").html("."+tld),domain.domainName!==domain.idnDomainName&&idnLanguage.not(":visible")&&idnLanguage.slideDown(),"string"==typeof pricing?(newSuggestion.find("button.btn-add-to-cart").remove(),""!=pricing?newSuggestion.find("button.domain-contact-support").show().end().find("span.price").hide():newSuggestion.remove()):newSuggestion.find("button.btn-add-to-cart").attr("data-domain",domain.domainName).end().find("span.price").html(pricing[Object.keys(pricing)[0]].register),suggestionCount<=10&&newSuggestion.show(),suggestionCount++,domain.group&&newSuggestion.find("span.promo").addClass(domain.group).html(domain.group.toUpperCase()).show(),(furtherSuggestions=suggestions.find("div.domain-suggestion.clone").not(":visible").length)>0&&jQuery("div.more-suggestions").show()})),jQuery(".domain-lookup-suggestions-loader").hide(),jQuery("#domainSuggestions").show()}})).always((function(){hasProductDomainLookupEnded(3,btnSearchObj)}))}else if("transfer"==domainoption){var transfer;jQuery("#resultDomainOption").val(domainoption),WHMCS.http.jqClient.post(WHMCS.utils.getRouteUrl("/domain/check"),{token:csrfToken,type:"transfer",domain:sld+tld,sld:sld,tld:tld,source:"cartAddDomain"},"json").done((function(data){if("object"==typeof data&&0!=data.result.length){var result=jQuery("#primaryLookupResult"),transfereligible=result.find(".transfer-eligible"),transferPrice=result.find(".domain-price"),transfernoteligible=result.find(".transfer-not-eligible"),resultDomain=jQuery("#resultDomain"),resultDomainPricing=jQuery("#resultDomainPricingTerm");0===Object.keys(data.result).length&&(jQuery(".domain-lookup-primary-loader").hide(),result.show(),transfernoteligible.show()),jQuery.each(data.result,(function(index,domain){var pricing=domain.pricing;jQuery(".domain-lookup-primary-loader").hide(),result.show(),domain.isRegistered?(transfereligible.show(),transferPrice.show().find(".register-price-label").hide().end().find(".transfer-price-label").show().end().find("span.price").html(pricing[Object.keys(pricing)[0]].transfer).end().find("button").attr("data-domain",domain.domainName),resultDomain.val(domain.domainName),resultDomainPricing.val(Object.keys(pricing)[0]).attr("name","domainsregperiod["+domain.domainName+"]"),btnDomainContinue.removeAttr("disabled")):transfernoteligible.show()}))}else jQuery(".domain-lookup-primary-loader").hide()})).always((function(){hasProductDomainLookupEnded(1,btnSearchObj)}))}else if("owndomain"==domainoption||"subdomain"==domainoption||"incart"==domainoption){var otherDomain;WHMCS.http.jqClient.post(WHMCS.utils.getRouteUrl("/domain/check"),{token:csrfToken,type:domainoption,pid:pid,domain:sld+tld,sld:sld,tld:tld,source:"cartAddDomain"},"json").done((function(data){"object"==typeof data&&0!=data.result.length?jQuery.each(data.result,(function(index,result){!0===result.status?window.location=whmcsBaseUrl+"/cart.php?a=confproduct&i="+result.num:(jQuery(".domain-lookup-primary-loader").hide(),"string"==typeof result?jQuery("#primaryLookupResult").show().find(".domain-error").text(result).show():jQuery("#primaryLookupResult").show().find(".domain-invalid").show())})):jQuery(".domain-lookup-subdomain-loader").hide()})).always((function(){hasProductDomainLookupEnded(1,btnSearchObj)}))}btnDomainContinue.show()})),jQuery("#frmProductDomainSelections").on("submit",(function(e){var idnLanguage=jQuery("#idnLanguageSelector"),idnLanguageInput=idnLanguage.find("select");return!(idnLanguage.is(":visible")&&!idnLanguageInput.val())||(e.preventDefault(),idnLanguageInput.showInputError(),!1)})),jQuery("#btnAlreadyRegistered").click((function(){jQuery("#containerNewUserSignup").slideUp("",(function(){jQuery("#containerExistingUserSignin").slideDown("",(function(){jQuery("#inputCustType").val("existing"),jQuery("#btnAlreadyRegistered").fadeOut("",(function(){jQuery("#btnNewUserSignup").fadeIn()}))}))})),jQuery("#containerNewUserSecurity").hide(),jQuery("#stateselect").attr("required")&&jQuery("#stateselect").removeAttr("required").addClass("requiredAttributeRemoved"),jQuery(".marketing-email-optin").slideUp()})),jQuery("#btnNewUserSignup").click((function(){jQuery("#containerExistingUserSignin").slideUp("",(function(){jQuery("#containerNewUserSignup").slideDown("",(function(){jQuery("#inputCustType").val("new"),0==jQuery("#passwdFeedback").html().length&&jQuery("#containerNewUserSecurity").show(),jQuery("#btnNewUserSignup").fadeOut("",(function(){jQuery("#btnAlreadyRegistered").fadeIn()}))})),jQuery(".marketing-email-optin").slideDown()})),jQuery("#stateselect").hasClass("requiredAttributeRemoved")&&jQuery("#stateselect").attr("required","required").removeClass("requiredAttributeRemoved")})),jQuery("#btnExistingLogin").click((function(){var inputLoginEmail=jQuery("#inputLoginEmail").val(),inputLoginPassword=jQuery("#inputLoginPassword").val(),existingLoginMessage=jQuery("#existingLoginMessage"),btnExistingLogin=jQuery("#btnExistingLogin");btnExistingLogin.prop("disabled",!0).addClass("disabled").find("span").toggle(),WHMCS.http.jqClient.jsonPost({url:WHMCS.utils.getRouteUrl("/login/cart"),data:{username:inputLoginEmail,password:inputLoginPassword,token:csrfToken},success:function(data){data.redirectUrl?window.location.href=data.redirectUrl:location.reload(!0)},error:function(error){error&&(existingLoginMessage.slideUp("fast").toggle().html(error).slideDown("fast"),btnExistingLogin.prop("disabled",!1).removeClass("disabled").find("span").toggle())}})})),jQuery(".account-select").on("ifChecked",(function(event){var userSignupContainer=jQuery("#containerNewUserSignup"),stateSelect=jQuery("#stateselect"),thisValue=jQuery(this).val(),btnCompleteOrder=jQuery("#btnCompleteOrder"),existingPayMethods=jQuery("#existingCardsContainer"),existingUserEmail=jQuery("#inputEmail");if(existingPayMethods.length&&existingPayMethods.html(""),existingUserEmail.length&&existingUserEmail.attr("value",""),jQuery("#containerExistingAccountSelect").find("div.account.active").removeClass("active"),jQuery(this).closest("div.account").addClass("active"),"new"===thisValue)userSignupContainer.not(":visible")&&(userSignupContainer.slideDown("",(function(){jQuery("#inputCustType").val("add"),jQuery(".marketing-email-optin").slideDown()})),stateSelect.hasClass("requiredAttributeRemoved")&&stateSelect.attr("required","required").removeClass("requiredAttributeRemoved"));else{if(btnCompleteOrder.addClass("disabled"),btnCompleteOrder.hasClass("spinner-on-click")){var icon=btnCompleteOrder.find("i.fas,i.far,i.fal,i.fab");jQuery(icon).data("original-class",icon.attr("class")).removeAttr("class").addClass("fas fa-spinner fa-spin")}jQuery("#inputCustType").val("account"),userSignupContainer.is(":visible")&&(userSignupContainer.slideUp(),stateSelect.attr("required")&&stateSelect.removeAttr("required").addClass("requiredAttributeRemoved"),jQuery(".marketing-email-optin").slideUp())}WHMCS.http.jqClient.jsonPost({url:WHMCS.utils.getRouteUrl("/cart/account/select"),data:{account_id:thisValue,token:csrfToken},success:function(data){var creditDiv=jQuery("#applyCreditContainer");if(jQuery("#totalCartPrice").text(data.total),creditDiv.find("p").first().text(data.availableCreditBalance),!data.canUseCreditOnCheckout&&creditDiv.is(":visible")){var skipCreditOnCheckout=jQuery("#skipCreditOnCheckout");creditDiv.hide(),skipCreditOnCheckout.prop("checked",!0)}else if(data.canUseCreditOnCheckout){var useCreditOnCheckout=jQuery("#useCreditOnCheckout"),spanFullCredit=jQuery("#spanFullCredit"),spanUseCredit=jQuery("#spanUseCredit");data.full?(hideCvcOnCheckoutForExistingCard="1",spanFullCredit.show().find("span").text(data.total),spanUseCredit.is(":visible")&&spanUseCredit.slideUp()):(hideCvcOnCheckoutForExistingCard="0",spanUseCredit.show().find("span").text(data.creditBalance),spanFullCredit.is(":visible")&&spanFullCredit.slideUp()),useCreditOnCheckout.iCheck("check"),creditDiv.not(":visible")&&creditDiv.slideDown()}existingPayMethods.length&&(existingPayMethods.html(data.existingCards),existingPayMethods.find('input[type="radio"]').iCheck({inheritID:!0,checkboxClass:"icheckbox_square-blue",radioClass:"iradio_square-blue",increaseArea:"20%"}),jQuery(".payment-methods:checked").trigger("ifChecked"),selectPreferredCard())},always:function(){if(btnCompleteOrder.removeClass("disabled"),btnCompleteOrder.hasClass("spinner-on-click")){var icon=btnCompleteOrder.find("i.fas,i.far,i.fal,i.fab");jQuery(icon).hasClass("fa-spinner")&&jQuery(icon).removeAttr("class").addClass(icon.data("original-class"))}}})}));var cvvFieldContainer=jQuery("#cvv-field-container"),existingCardContainer=jQuery("#existingCardsContainer"),newCardInfo=jQuery("#newCardInfo"),newCardSaveSettings=jQuery("#newCardSaveSettings"),inputNoStoreContainer=jQuery("#inputNoStoreContainer"),existingCardInfo=jQuery("#existingCardInfo"),newCardOption=jQuery("#new"),creditCardInputFields=jQuery("#creditCardInputFields");jQuery(document).on("ifChecked",".existing-card",(function(event){newCardSaveSettings.slideUp().find("input").attr("disabled","disabled"),1!==jQuery(".payment-methods:checked").data("remote-inputs")&&(newCardInfo.slideUp().find("input").attr("disabled","disabled"),"1"!==hideCvcOnCheckoutForExistingCard?existingCardInfo.slideDown().find("input").removeAttr("disabled"):existingCardInfo.slideUp().find("input").attr("disabled","disabled"))})),newCardOption.on("ifChecked",(function(event){newCardSaveSettings.slideDown().find("input").removeAttr("disabled"),1!==jQuery(".payment-methods:checked").data("remote-inputs")&&(newCardInfo.slideDown().find("input").removeAttr("disabled"),existingCardInfo.slideUp().find("input").attr("disabled","disabled"))})),jQuery(".payment-methods").on("ifChecked",(function(event){var existingCards=jQuery(document).find(".existing-card");if(existingCards.length||existingCardInfo.slideUp().find("input").attr("disabled","disabled"),jQuery(this).hasClass("is-credit-card")){var gatewayPaymentType=jQuery(this).data("payment-type"),gatewayModule=jQuery(this).val(),showLocal=jQuery(this).data("show-local"),relevantMethods=[];"RemoteCreditCard"===gatewayPaymentType?inputNoStoreContainer.hide().find("input").prop("disabled","disabled"):inputNoStoreContainer.not(":visible")&&inputNoStoreContainer.slideDown().find("input").removeProp("disabled"),existingCards.each((function(index){var paymentType=jQuery(this).data("payment-type"),paymentModule=jQuery(this).data("payment-gateway"),payMethodId=jQuery(this).val(),paymentTypeMatch=paymentType===gatewayPaymentType,paymentModuleMatch=!1;"RemoteCreditCard"===gatewayPaymentType?paymentModuleMatch=paymentModule===gatewayModule:"CreditCard"===gatewayPaymentType&&(paymentModuleMatch=!0),showLocal&&"CreditCard"===paymentType&&(paymentTypeMatch=!0,paymentModuleMatch=!0);var payMethodElements=jQuery('[data-paymethod-id="'+payMethodId+'"]');paymentTypeMatch&&paymentModuleMatch?(jQuery(payMethodElements).show(),relevantMethods.push(this)):jQuery(payMethodElements).hide()}));var enabledRelevantMethods=relevantMethods.filter((function(item){return!jQuery(item).attr("disabled")}));if(enabledRelevantMethods.length>0){var defaultId=null;jQuery.each(enabledRelevantMethods,(function(index,value){var jQueryElement=jQuery(value),order=parseInt(jQueryElement.data("order-preference"),10);if((null===defaultId||order<defaultId)&&(defaultId=jQueryElement.val(),0===order))return!1})),null===defaultId&&(defaultId="new"),jQuery.each(enabledRelevantMethods,(function(index,value){var jQueryElement=jQuery(value);if(jQueryElement.val()===defaultId)return jQueryElement.iCheck("check"),!1})),existingCardContainer.show(),"1"!==hideCvcOnCheckoutForExistingCard?existingCardInfo.show().find("input").removeAttr("disabled"):existingCardInfo.hide().find("input").attr("disabled","disabled")}else jQuery(newCardOption).iCheck("check"),existingCardContainer.hide(),existingCardInfo.hide().find("input").attr("disabled","disabled");creditCardInputFields.is(":visible")||creditCardInputFields.slideDown()}else creditCardInputFields.slideUp()})),jQuery(".cc-input-container .paymethod-info").click((function(){var payMethodId=$(this).data("paymethod-id"),input=jQuery('input[name="ccinfo"][value='+payMethodId+"]:not(:disabled)");input.length>0&&input.iCheck("check")})),jQuery("#inputDomainContact").on("change",(function(){var thisInput=jQuery(this);"addingnew"===this.value?(thisInput.closest("div").addClass("pb-2"),jQuery("#domainRegistrantInputFields").parent("div").slideDown()):jQuery("#domainRegistrantInputFields").parent("div").slideUp((function(){thisInput.closest("div").removeClass("pb-2")}))})),"function"==typeof registerFormPasswordStrengthFeedback?jQuery("#inputNewPassword1").keyup(registerFormPasswordStrengthFeedback):jQuery("#inputNewPassword1").keyup((function(){passwordStrength=getPasswordStrength(jQuery(this).val()),passwordStrength>=75?(textLabel=langPasswordStrong,cssClass="success"):passwordStrength>=30?(textLabel=langPasswordModerate,cssClass="warning"):(textLabel=langPasswordWeak,cssClass="danger"),jQuery("#passwordStrengthTextLabel").html(langPasswordStrength+": "+passwordStrength+"% "+textLabel),jQuery("#passwordStrengthMeterBar").css("width",passwordStrength+"%").attr("aria-valuenow",passwordStrength),jQuery("#passwordStrengthMeterBar").removeClass("progress-bar-success progress-bar-warning progress-bar-danger").addClass("progress-bar-"+cssClass)})),jQuery("#inputDomain").on("shown.bs.tooltip",(function(){setTimeout((function(input){input.tooltip("hide")}),5e3,jQuery(this))})),jQuery("#frmDomainChecker").submit((function(e){if(e.preventDefault(),void 0===recaptchaValidationComplete||void 0===recaptchaType||"invisible"!==recaptchaType||!1!==recaptchaValidationComplete){var frmDomain=jQuery("#frmDomainChecker"),inputDomain=jQuery("#inputDomain"),suggestions=jQuery("#domainSuggestions"),reCaptchaContainer=jQuery("#divDynamicRecaptcha"),captcha=jQuery("#inputCaptcha"),idnLanguage=jQuery("#idnLanguageSelector");if(jQuery(".field-error-msg").hide(),idnLanguage.is(":visible")&&(idnLanguage.slideUp(),idnLanguage.find("select").val("")),domainLookupCallCount=0,!inputDomain.val())return inputDomain.tooltip("show"),void inputDomain.focus();if(inputDomain.tooltip("hide"),jQuery("#captchaContainer").length)validate_captcha(frmDomain);else{reCaptchaContainer.tooltip("hide"),captcha.tooltip("hide"),jQuery("#btnCheckAvailability").attr("disabled","disabled").addClass("disabled"),jQuery(".domain-lookup-result").hide(),jQuery(".domain-lookup-loader").show(),suggestions.find("div:not(.actions)").hide(),suggestions.find(".clone").remove(),jQuery("div.panel-footer.more-suggestions").hide().find("a").show().end().find("span.no-more").hide(),jQuery(".btn-add-to-cart").removeAttr("disabled").find("span").hide().end().find("span.to-add").show(),jQuery("#DomainSearchResults").not(":visible")&&jQuery(".domain-pricing").fadeOut("fast",(function(){jQuery("#DomainSearchResults").fadeIn()}));var lookup=WHMCS.http.jqClient.post(WHMCS.utils.getRouteUrl("/domain/check"),frmDomain.serialize()+"&type=domain","json"),spotlight=WHMCS.http.jqClient.post(WHMCS.utils.getRouteUrl("/domain/check"),frmDomain.serialize()+"&type=spotlight","json"),suggestion=WHMCS.http.jqClient.post(WHMCS.utils.getRouteUrl("/domain/check"),frmDomain.serialize()+"&type=suggestions","json");lookup.done((function(data){"object"==typeof data&&0!=data.result.length?jQuery.each(data.result,(function(index,domain){var pricing=null,result=jQuery("#primaryLookupResult"),available=result.find(".domain-available"),availablePrice=result.find(".domain-price"),contactSupport=result.find(".domain-contact-support"),unavailable=result.find(".domain-unavailable"),invalid=result.find(".domain-invalid"),error=result.find(".domain-error");if(jQuery(".domain-lookup-primary-loader").hide(),result.find(".btn-add-to-cart").removeClass("checkout"),result.show(),"string"!=typeof domain&&!domain.error&&domain.isValidDomain)pricing=domain.pricing,unavailable.hide(),contactSupport.hide(),invalid.hide(),error.hide(),domain.isAvailable&&"string"!=typeof pricing?(domain.domainName!==domain.idnDomainName&&idnLanguage.not(":visible")&&idnLanguage.slideDown(),domain.preferredTLDNotAvailable&&unavailable.show().find("strong").html(domain.originalUnavailableDomain),available.show().find("strong").html(domain.domainName),availablePrice.show().find("span.price").html(pricing[Object.keys(pricing)[0]].register).end().find("button").attr("data-domain",domain.domainName)):(available.hide(),availablePrice.hide(),contactSupport.hide(),unavailable.show().find("strong").html(domain.domainName),"string"==typeof pricing&&"ContactUs"==pricing&&contactSupport.show());else{available.hide(),availablePrice.hide(),unavailable.hide(),contactSupport.hide(),invalid.hide(),error.hide();var done=!1,reg=/<br\s*\/>/,errors=[];if(!domain.isValidDomain&&domain.domainErrorMessage)invalid.text(domain.domainErrorMessage);else if(domain.error||"error"===index){if("string"==typeof domain)error.text(domain);else if(domain.error.match(reg)){error.text(""),errors=domain.error.split(reg);for(var i=0;i<errors.length;i++){var errorMsg=errors[i];errorMsg.length&&(error.text()&&error.append("<br />"),error.append(jQuery("<span></span>").text(errorMsg)))}}else error.text(domain.error);error.show(),done=!0}done||invalid.show()}})):jQuery(".domain-lookup-primary-loader").hide()})).always((function(){hasDomainLookupEnded()})),spotlight.done((function(data){"object"!=typeof data||0==data.result.length||data.result.error?jQuery(".domain-lookup-spotlight-loader").hide():jQuery.each(data.result,(function(index,domain){var tld=domain.tldNoDots,pricing=domain.pricing,result=jQuery("#spotlight"+tld+" .domain-lookup-result");jQuery(".domain-lookup-spotlight-loader").hide(),result.find("button").hide(),domain.isValidDomain?domain.isAvailable&&"string"!=typeof pricing?(domain.domainName!==domain.idnDomainName&&idnLanguage.not(":visible")&&idnLanguage.slideDown(),result.find("button.unavailable").hide().end().find("button.invalid").hide().end().find("span.available").html(pricing[Object.keys(pricing)[0]].register).show().end().find("button").not("button.unavailable").not("button.invalid").attr("data-domain",domain.domainName).show(),result.find("button.domain-contact-support").hide()):"string"==typeof pricing?(""==pricing?result.find("button.unavailable").show():result.find("button.domain-contact-support").show(),result.find("button.invalid").hide(),result.find("span.available").hide()):result.find("button.invalid").hide().end().find("button.unavailable").show().end().find("span.available").hide():result.find("button.invalid:hidden").show().end().find("span.available").hide().end().find("button").not("button.invalid").hide(),result.show()}))})).always((function(){hasDomainLookupEnded()})),suggestion.done((function(data){if("object"!=typeof data||0==data.result.length||data.result.error)jQuery(".suggested-domains").fadeOut("fast",(function(){jQuery(this).hide()}));else{jQuery(".suggested-domains").show();var suggestionCount=1;jQuery.each(data.result,(function(index,domain){var tld=domain.tld,pricing=domain.pricing;suggestions.find("div:first").clone(!0,!0).appendTo(suggestions);var newSuggestion=suggestions.find("div.domain-suggestion").last();newSuggestion.addClass("clone").find("span.domain").html(domain.sld).end().find("span.extension").html("."+tld),"string"==typeof pricing?(newSuggestion.find("button.btn-add-to-cart").remove(),""!=pricing?newSuggestion.find("button.domain-contact-support").show().end().find("span.price").hide():newSuggestion.remove()):(domain.domainName!==domain.idnDomainName&&idnLanguage.not(":visible")&&idnLanguage.slideDown(),newSuggestion.find("button.btn-add-to-cart").attr("data-domain",domain.domainName).end().find("span.price").html(pricing[Object.keys(pricing)[0]].register)),suggestionCount<=10&&newSuggestion.show(),suggestionCount++,domain.group&&(newSuggestion.find("span.promo").addClass(domain.group).show(),newSuggestion.find("span.sales-group-"+domain.group).show()),(furtherSuggestions=suggestions.find("div.domain-suggestion.clone:hidden").length)>0&&jQuery("div.more-suggestions").show()})),jQuery(".domain-lookup-suggestions-loader").hide(),jQuery("#domainSuggestions").show()}})).always((function(){hasDomainLookupEnded()}))}}})),jQuery(".btn-add-to-cart").on("click",(function(){if(jQuery(this).hasClass("checkout"))window.location=whmcsBaseUrl+"/cart.php?a=confdomains";else{var domain=jQuery(this).attr("data-domain"),buttons=jQuery('button[data-domain="'+domain+'"]'),whois=jQuery(this).attr("data-whois"),isProductDomain=jQuery(this).hasClass("product-domain"),btnDomainContinue=jQuery("#btnDomainContinue"),resultDomain=jQuery("#resultDomain"),resultDomainPricing=jQuery("#resultDomainPricingTerm"),idnLanguage=jQuery("#idnLanguageSelector"),idnLanguageInput=idnLanguage.find("select");if(!idnLanguage.is(":visible")||idnLanguageInput.val()){buttons.find("span.to-add").hide(),buttons.find("span.loading").show();var sideOrder=jQuery(this).parents(".spotlight-tlds").length>0||jQuery(this).parents(".suggested-domains").length>0?1:0,addToCart=WHMCS.http.jqClient.post(whmcsBaseUrl+"/cart.php",{a:"addToCart",domain:domain,token:csrfToken,whois:whois,sideorder:sideOrder,idnlanguage:idnLanguageInput.val()},"json").done((function(data){buttons.find("span.loading").hide(),"added"===data.result?(buttons.find("span.added").show(),isProductDomain||buttons.removeAttr("disabled").addClass("checkout"),resultDomain.length&&!resultDomain.val()&&(resultDomain.val(domain),resultDomainPricing.val(data.period).attr("name","domainsregperiod["+domain+"]"),btnDomainContinue.length>0&&btnDomainContinue.is(":disabled")&&btnDomainContinue.removeAttr("disabled")),jQuery("#cartItemCount").html(data.cartCount)):(buttons.find("span.available.price").hide(),buttons.find("span.unavailable").show(),buttons.attr("disabled","disabled"))}))}else idnLanguageInput.showInputError()}})),jQuery("#frmDomainTransfer").submit((function(e){if(e.preventDefault(),void 0===recaptchaValidationComplete||void 0===recaptchaType||"invisible"!==recaptchaType||!1!==recaptchaValidationComplete){var frmDomain=jQuery("#frmDomainTransfer"),transferButton=jQuery("#btnTransferDomain"),inputDomain=jQuery("#inputTransferDomain"),authField=jQuery("#inputAuthCode"),domain=inputDomain.val(),authCode=authField.val(),redirect=!1,reCaptchaContainer=jQuery("#divDynamicRecaptcha"),captcha=jQuery("#inputCaptcha");if(!domain)return inputDomain.tooltip("show"),inputDomain.focus(),!1;inputDomain.tooltip("hide"),jQuery("#captchaContainer").length?validate_captcha(frmDomain):(reCaptchaContainer.tooltip("hide"),captcha.tooltip("hide"),transferButton.attr("disabled","disabled").addClass("disabled").find("span").show().end().find(".loader").show(),WHMCS.http.jqClient.post(frmDomain.attr("action"),frmDomain.serialize(),null,"json").done((function(data){if("object"!=typeof data)return transferButton.find("span").hide().end().find("#addToCart").show().end().removeAttr("disabled").removeClass("disabled"),!1;var result=data.result;"added"==result?(window.location=whmcsBaseUrl+"/cart.php?a=confdomains",redirect=!0):1==result.isRegistered?1!=result.epp||authCode||(authField.tooltip("show"),authField.focus()):jQuery("#transferUnavailable").html(result.unavailable).fadeIn("fast",(function(){setTimeout((function(input){input.fadeOut("fast")}),3e3,jQuery(this))}))})).always((function(){0==redirect&&transferButton.find("span").hide().end().find("#addToCart").show().end().removeAttr("disabled").removeClass("disabled")})))}})),jQuery("#btnEmptyCart").click((function(){jQuery("#modalEmptyCart").modal("show")})),jQuery("#cardType li a").click((function(e){e.preventDefault(),jQuery("#selectedCardType").html(jQuery(this).html()),jQuery("#cctype").val(jQuery("span.type",this).html().trim())})),jQuery(document).on("click",".domain-contact-support",(function(e){e.preventDefault();var child=window.open();child.opener=null,child.location="submitticket.php"})),jQuery("#frmConfigureProduct input:visible, #frmConfigureProduct select:visible").first().focus(),jQuery("#frmProductDomain input[type=text]:visible").first().focus(),jQuery("#frmDomainChecker input[type=text]:visible").first().focus(),jQuery("#frmDomainTransfer input[type=text]:visible").first().focus(),jQuery(".checkout .mc-promo .btn-add").click((function(e){var self=jQuery(this),productKey=self.data("product-key"),upSellBox=jQuery("#promo_"+productKey);self.attr("disabled","disabled").find("span.arrow i").removeClass("fa-chevron-right").addClass("fa-spinner fa-spin"),WHMCS.http.jqClient.post(window.location.pathname,{a:"addUpSell",product_key:productKey,checkoutModal:!0,token:csrfToken},(function(data){void 0===data.modal?data.done&&(jQuery("#totalCartPrice").text(data.newTotal),upSellBox.fadeOut()):openModal(data.modal,"",data.modalTitle,"","",data.modalSubmit,data.modelSubmitId)}),"json")})),jQuery(".viewcart .mc-promo .btn-add").click((function(e){var self=jQuery(this);self.attr("disabled","disabled").find("span.arrow i").removeClass("fa-chevron-right").addClass("fa-spinner fa-spin"),WHMCS.http.jqClient.post(window.location.pathname,{a:"addUpSell",product_key:self.data("product-key"),token:csrfToken},(function(data){void 0===data.modal?window.location.reload(!0):openModal(data.modal,"",data.modalTitle,"","",data.modalSubmit,data.modelSubmitId)}),"json")})),jQuery(document).on("click","#btnAddUpSellCheckout",(function(e){var upsellModalForm=jQuery("#upsellModalForm");return WHMCS.http.jqClient.post(whmcsBaseUrl+"/cart.php",upsellModalForm.serialize(),(function(data){data.done&&jQuery("#totalCartPrice").text(data.newTotal)}),"json"),!1}));var useCreditOnCheckout=jQuery("#iCheck-useCreditOnCheckout"),skipCreditOnCheckout=jQuery("#iCheck-skipCreditOnCheckout");useCreditOnCheckout.on("ifChecked",(function(){var radio=jQuery("#useCreditOnCheckout"),selectedPaymentMethod=jQuery('input[name="paymentmethod"]:checked'),selectedCC=jQuery('input[name="ccinfo"]:checked'),isCcSelected=selectedPaymentMethod.hasClass("is-credit-card"),firstNonCcGateway=jQuery('input[name="paymentmethod"]').not(jQuery('input.is-credit-card[name="paymentmethod"]')).first(),container=jQuery("#paymentGatewaysContainer"),existingCardInfo=jQuery("#existingCardInfo"),ccInputFields=jQuery("#creditCardInputFields"),spanFullCredit=jQuery("#spanFullCredit"),shouldHideContainer=!0;radio.prop("checked")&&(spanFullCredit.is(":hidden")&&(shouldHideContainer=!1),isCcSelected&&0!==firstNonCcGateway.length?(firstNonCcGateway.iCheck("check"),ccInputFields.slideUp(),shouldHideContainer&&container.slideUp()):!isCcSelected&&container.is(":visible")?shouldHideContainer&&container.slideUp():shouldHideContainer&&!isCcSelected||container.is(":visible")||(ccInputFields.slideDown(),container.slideDown()),isCcSelected&&"new"!==selectedCC.val()&&(spanFullCredit.is(":visible")?(hideCvcOnCheckoutForExistingCard="1",existingCardInfo.hide().find("input").attr("disabled","disabled")):existingCardInfo.show().find("input").removeAttr("disabled")))})),skipCreditOnCheckout.on("ifChecked",(function(){var selectedPaymentMethod=jQuery('input[name="paymentmethod"]:checked'),selectedCC=jQuery('input[name="ccinfo"]:checked'),isCcSelected=selectedPaymentMethod.hasClass("is-credit-card"),existingCardInfo=jQuery("#existingCardInfo"),container=jQuery("#paymentGatewaysContainer");container.is(":visible")||container.slideDown(),isCcSelected&&(hideCvcOnCheckoutForExistingCard="0","new"!==selectedCC.val()&&existingCardInfo.show().find("input").removeAttr("disabled"),jQuery("#creditCardInputFields").slideDown())}));var applyCreditContainer=jQuery("#applyCreditContainer");applyCreditContainer.is(":visible")&&1===applyCreditContainer.data("apply-credit")&&useCreditOnCheckout.length&&(skipCreditOnCheckout.iCheck("check"),useCreditOnCheckout.iCheck("check")),jQuery("#domainRenewals").find("span.added").hide().end().find("span.to-add").find("i").hide(),jQuery(".btn-add-renewal-to-cart").on("click",(function(){var self=jQuery(this),domainId=self.data("domain-id"),period=jQuery("#renewalPricing"+domainId).val();self.hasClass("checkout")?window.location=whmcsBaseUrl+"/cart.php?a=view":(self.attr("disabled","disabled").each((function(){jQuery(this).find("i").fadeIn("fast").end().css("width",jQuery(this).outerWidth())})),WHMCS.http.jqClient.post(WHMCS.utils.getRouteUrl("/cart/domain/renew/add"),{domainId:domainId,period:period,token:csrfToken},null,"json").done((function(data){self.find("span.to-add").hide(),"added"===data.result&&self.find("span.added").show().end().find("i").fadeOut("fast").css("width",self.outerWidth()),recalculateRenewalTotals()})))})),jQuery(document).on("submit","#removeRenewalForm",(function(e){e.preventDefault(),WHMCS.http.jqClient.post(whmcsBaseUrl+"/cart.php",jQuery(this).serialize()+"&ajax=1").done((function(data){var domainId=data.i,button;jQuery("#renewDomain"+domainId).attr("disabled","disabled").each((function(){jQuery(this).find("span.added").hide().end().removeClass("checkout").find("span.to-add").show().end().removeAttr("disabled"),jQuery(this).css("width",jQuery(this).outerWidth())}))})).always((function(){jQuery("#modalRemoveItem").modal("hide"),recalculateRenewalTotals()}))})),jQuery(".select-renewal-pricing").on("change",(function(){var self,domainId=jQuery(this).data("domain-id"),button;jQuery("#renewDomain"+domainId).attr("disabled","disabled").each((function(){jQuery(this).css("width",jQuery(this).outerWidth()),jQuery(this).find("span.added").hide().end().removeClass("checkout").find("span.to-add").show().end().removeAttr("disabled")}))})),jQuery("#domainRenewalFilter").on("keyup",(function(){var inputText=jQuery(this).val().toLowerCase();jQuery("#domainRenewals").find("div.domain-renewal").filter((function(){jQuery(this).toggle(jQuery(this).data("domain").toLowerCase().indexOf(inputText)>-1)}))})),(checkoutForm=jQuery("#frmCheckout")).length&&checkoutForm.on("submit",validateCheckoutCreditCardInput),jQuery(".payment-methods:checked").trigger("ifChecked"),existingCardContainer.is(":visible")&&existingCardContainer.find("input.existing-card").length>0&&newCardInfo.slideUp()}));