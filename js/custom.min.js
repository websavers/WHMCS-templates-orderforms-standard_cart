function validation_fail(formElement,errorText){formElement.addClass("error"),jQuery("#btnCompleteProductConfig").attr("disabled","disabled"),formElement.next().hasClass("errortext")||formElement.after('<small class="errortext" style="display:block">'+errorText+"</small>")}function validation_pass(formElement){jQuery("#btnCompleteProductConfig").removeAttr("disabled"),formElement.removeClass("error"),formElement.siblings(".errortext").remove()}function ws_showloginform(){"new"==jQuery("#custtype").val()?(jQuery("#custtype").val("existing"),jQuery("#signupfrm").fadeToggle("slow",(function(){jQuery("#loginfrm").fadeToggle()}))):(jQuery("#custtype").val("new"),jQuery("#loginfrm").fadeToggle("slow",(function(){jQuery("#signupfrm").fadeToggle()})))}function sanitize_domain(element,allowdots=!1,updatedirect=!0){var $str=element.val();if(""==$str)return $str;if($str=($str=($str=($str=$str.replace(/^(https?:\/\/)?(www\.)?/g,"")).replace(/(:\d+)?$/g,"")).replace(/[^a-zA-Z0-9\-\.]/g,"")).toLowerCase(),-1!==element.attr("id").indexOf("tld")||1==allowdots){if(!updatedirect)return $str;element.val($str)}else{var domain_parts=$str.split(/\.(.*)/);if(""!=domain_parts[0]){if(!updatedirect)return domain_parts[0];if(element.val(domain_parts[0]),void 0===domain_parts[1])return}}}function sanitize_hostname(element){return sanitize_domain(element,!0,!1)}jQuery(document).ready((function(){if(jQuery("html.cart").length>0&&jQuery("html.cart #content").prepend('<div id="stepsbox-container"><div class="stepsbox inactive"><a href="cart.php">Choose Service</a></div><div class="stepsbox inactive">Domain Options</div><div class="stepsbox inactive">Configure Service</div><div class="stepsbox inactive"><a href="cart.php?a=view">Cart</a></div><div class="stepsbox inactive"><a href="cart.php?a=checkout">Checkout</a></div></div>'),jQuery("body.cart").length>0){jQuery("body.cart ol.breadcrumb").append('\x3c!--<li class="breadcrumb-item"><a href="cart.php">Choose Service</a></li>--\x3e<li class="breadcrumb-item"><a>Domain Options</a></li><li class="breadcrumb-item"><a>Configure Services/Domains</a></li><li class="breadcrumb-item"><a href="cart.php?a=view">Cart</a></li><li class="breadcrumb-item"><a href="cart.php?a=checkout">Checkout</a></li>');var params,num=1;switch(new window.URLSearchParams(window.location.search).get("a")){case"add":num=2;break;case"confproduct":case"confdomains":num=3;break;case"view":num=4;break;case"checkout":num=5}bc_selector="body.cart ol.breadcrumb li:nth-child("+num+")",jQuery(bc_selector).addClass("active"),jQuery("body.cart ol.breadcrumb").scrollLeft(jQuery(bc_selector).position().left)}if(jQuery("#registersld").length>0&&jQuery("#registersld").change((function(){sanitize_domain(jQuery("#registersld"))})),jQuery("#transfersld").length>0&&jQuery("#transfersld").change((function(){sanitize_domain(jQuery("#transfersld"))})),jQuery("#owndomainsld").length>0&&jQuery("#owndomainsld").change((function(){sanitize_domain(jQuery("#owndomainsld"))})),jQuery("#owndomaintld").length>0&&jQuery("#owndomaintld").change((function(){sanitize_domain(jQuery("#owndomaintld"))})),jQuery("#inputHostname").length>0){var $hostname_elem=jQuery("#inputHostname");$hostname_elem.after('<small class="infotext"><i class="fa fa-info-circle"></i> This is the name for your server, often a subdomain of your website or organization. If you do not have a domain to use, you may use [a_name].myserver.ws and we will configure the DNS for you.</small>'),$hostname_elem.keyup((function(){ws_delay((function(){var $hostname=sanitize_hostname($hostname_elem);$hostname_elem.val($hostname),-1!==$hostname.indexOf(".")?validation_pass($hostname_elem):validation_fail($hostname_elem,'<i class="fa fa-warning"></i> A hostname must be a domain or subdomain like xyz.com or sub.xyz.com')}),1e3)}))}if(jQuery("#inputNs1prefix").length>0&&jQuery("#inputNs1prefix").val("none"),jQuery("#inputNs2prefix").length>0&&jQuery("#inputNs2prefix").val("none"),jQuery("input[name=rootpw]").length>0&&jQuery("input[name=rootpw]").val(randString(30)).attr("readonly","true").after('<small class="infotext"><i class="fa fa-info-circle"></i> A secure password has been automatically generated for you. You will be able to view this password securely in the Client Centre after the server has been provisioned.</small>'),jQuery("select#inputConfigOption25").length>0){var $system_template_sel=jQuery("select#inputConfigOption25");show_cp_license_info($system_template_sel),$system_template_sel.change((function(){show_cp_license_info($system_template_sel)}))}function show_cp_license_info($system_template_sel){$system_template_sel.find("option:selected").text().match("Plesk")?""===$system_template_sel.siblings(".cp-license-info").text()&&$system_template_sel.after('<small class="infotext cp-license-info" style="display:block"><i class="fa fa-info-circle"></i> You will need a license to operate this control panel. Be sure to select one from the "Control Panel License" drop down, otherwise the panel will not be usable.</small>'):$system_template_sel.siblings(".cp-license-info").remove()}jQuery(".domain-config .extra-domain-fields").length>0&&jQuery(".domain-config").each((function(index){jQuery('select[name="domainfield['+index+'][0]"] option[value="Corporation"]:selected')&&jQuery('select[name="domainfield['+index+'][0]"]').val("Canadian Citizen").css("pointer-events","none").after("<div><small><em>Legal type cannot be changed as we are only able to register .ca domains to Canadian Citizens.</em></small></div>"),jQuery('input[type="checkbox"][name="domainfield['+index+'][1]"]').parent().iCheck("check"),jQuery('input[type="checkbox"][name="domainfield['+index+'][2]"]').parent().iCheck("check")})),jQuery("form[name=orderfrm]").length>0&&jQuery("select#stateselect").ready((function(){jQuery(this).change((function(){var $target=jQuery("form[name=orderfrm] .alert.alert-success.text-center.large-text strong");$target.html('<i class="fa fas fa-spinner fa-spin"></i>'),jQuery.post("cart.php",{ajax:1,calctotal:!0,configure:!0,a:"setstateandcountry",state:jQuery("#stateselect").val(),country:jQuery("#inputCountry").val()}).done((function(html){var total_amnt=jQuery(html).find("#totalDueToday").html();$target.html(total_amnt)}))}))}))}));var ws_delay=function(){var timer=0;return function(callback,ms){clearTimeout(timer),timer=setTimeout(callback,ms)}}();function card_type_get_visual($cardtype){switch($cardtype){case"visa":return"Visa";case"mastercard":return"Mastercard";case"amex":return"American Express";case"discover":return"Discover";case"jcb":return"JCB";case"diners-club":return"Diners Club";default:return"Credit Card"}}function card_type_get_fontawesome($cardtype){switch($cardtype){case"visa":return"fa-cc-visa";case"mastercard":return"fa-cc-mastercard";case"amex":return"fa-cc-amex";case"discover":return"fa-cc-discover";case"jcb":return"fa-cc-jcb";case"diners-club":return"fa-cc-diners-club";default:return"fa-credit-card"}}function ws_update_addon_cycle_pricing(){var $billingcycle=jQuery("#inputBillingcycle").find(":selected").val();jQuery(".addon-products .panel-addon").each((function(){var $addon_title=jQuery(this).find("label").text(),$addon_inputname=jQuery(this).find("label input").attr("name"),$addon_price=jQuery(this).find(".panel-price");if(-1===$addon_price.text().indexOf("One Time"))var cycle_matched_price=jQuery.post("cart.php",{ajax:1,a:"confproduct",calctotal:!0,configure:!0,i:0,billingcycle:$billingcycle,[$addon_inputname]:"on"}).done((function(html){jQuery(html).find(".pull-left").each((function(){jQuery(this).text().indexOf($addon_title.trim())>-1&&$addon_price.text(jQuery(this).siblings(".pull-right").text())}))}))}))}"function"!=typeof randString&&(window.randString=function($length){for(var $possible="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",$text="",i=0;i<$length;i++)$text+=$possible.charAt(Math.floor(Math.random()*$possible.length));return $text}),jQuery(document).ready((function(){}));